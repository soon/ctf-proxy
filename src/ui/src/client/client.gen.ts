// This file is auto-generated by @hey-api/openapi-ts

import type { ClientOptions } from "./types.gen";
import {
	type ClientOptions as DefaultClientOptions,
	type Config,
	createClient,
	createConfig,
} from "./client";

/**
 * The `createClientConfig()` function will be called on client initialization
 * and the returned object will become the client's initial configuration.
 *
 * You may want to initialize your client this way instead of calling
 * `setConfig()`. This is useful for example if you're using Next.js
 * to ensure your client always has the correct values.
 */
export type CreateClientConfig<T extends DefaultClientOptions = ClientOptions> =
	(
		override?: Config<DefaultClientOptions & T>,
	) => Config<Required<DefaultClientOptions> & T>;

// Initialize with stored URL or default
const storedUrl = localStorage.getItem("ctf-proxy-api-url");
const initialUrl = storedUrl || "http://localhost:8080";

export const client = createClient(
	createConfig<ClientOptions>({
		baseUrl: initialUrl,
	}),
);
